import{useLocaleConfig as c}from"@vuepress/helper/client";import{pageviewCount as f}from"@waline/client/pageview";import{defineComponent as v,computed as n,onMounted as g,watch as L,nextTick as C,h as a,defineAsyncComponent as h}from"vue";import{usePageFrontmatter as w,usePageLang as W}from"vuepress/client";import{LoadingIcon as A}from"vuepress-shared/client";import"@waline/client/waline.css";import"../styles/waline.scss";import{c as N}from"../index-wG_My4pN.js";const y=WALINE_LOCALES;WALINE_META&&import("@waline/client/waline-meta.css");var E=v({name:"WalineComment",props:{identifier:{type:String,required:!0}},setup(t){const e=N(),m=w(),p=W(),l=c(y);let i;const o=!!e.serverURL,s=n(()=>{if(!o)return!1;const d=e.pageview!==!1,r=m.value.pageview;return!!r||d!==!1&&r!==!1}),u=n(()=>({lang:p.value==="zh-CN"?"zh-CN":"en",locale:l.value,dark:"html.dark",...e,path:t.identifier}));return g(()=>{L(()=>t.identifier,()=>{i?.(),s.value&&C().then(()=>{setTimeout(()=>{i=f({serverURL:e.serverURL,path:t.identifier})},e.delay||800)})},{immediate:!0})}),()=>o?a("div",{id:"comment",class:"waline-wrapper"},a(h({loader:async()=>(await import("@waline/client/component")).Waline,loadingComponent:A}),u.value)):null}});export{E as default};
//# sourceMappingURL=Waline.js.map
