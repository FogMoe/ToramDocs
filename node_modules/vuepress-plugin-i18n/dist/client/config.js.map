{"version":3,"sources":["../../src/client/config.ts","src/client/components/I18nTip.vue","../../src/client/composables/useI18nData.ts","../../src/client/define.ts","sfc-template:/home/runner/work/vuepress-plugin-i18n/vuepress-plugin-i18n/src/client/components/I18nTip.vue?type=template","../../src/client/components/I18nTip.vue"],"sourcesContent":["import { defineClientConfig } from \"@vuepress/client\";\nimport I18nTip from \"./components/I18nTip.vue\";\n\nexport default defineClientConfig({\n  enhance({ app }) {\n    app.component(\"I18nTip\", I18nTip);\n  },\n});\n","<script setup lang=\"ts\">\nimport type {\n  I18nData,\n  I18nPluginLocaleData,\n  LinkRenderer,\n} from \"../../shared/types\";\nimport { computed } from \"vue\";\nimport { isAbsoluteUrl } from \"vuepress-shared/client\";\nimport { useI18nData } from \"../composables\";\n\ntype I18nPluginTipType = \"untranslated\" | \"outdated\";\n\nconst linkRenderer: LinkRenderer = (text, url) =>\n  `<a href=\"${url}\"${isAbsoluteUrl(url) ? ` target=\"_blank\"` : \"\"}>${text}</a>`;\n\nconst getContent = (\n  type: I18nPluginTipType,\n  locale: I18nPluginLocaleData,\n  i18nData: I18nData,\n) => {\n  switch (type) {\n    case \"untranslated\":\n      return locale.untranslated.content(\n        linkRenderer,\n        i18nData.translationGuide,\n      );\n    case \"outdated\":\n      if (\n        !i18nData.updatedTime ||\n        !i18nData.sourceUpdatedTime ||\n        !i18nData.sourceLink\n      ) {\n        return null;\n      } else {\n        return locale.outdated.content(\n          linkRenderer,\n          i18nData.sourceUpdatedTime,\n          i18nData.updatedTime,\n          i18nData.sourceLink,\n        );\n      }\n    default:\n      return null;\n  }\n};\n\nconst i18nData = useI18nData();\nconst { containerClass, titleClass } = i18nData.value.options;\nconst locale = computed(() => i18nData.value.locale);\nconst showTips = computed(\n  () => i18nData.value.isUntranslated || i18nData.value.isOutdated,\n);\nconst tipType = computed(() =>\n  i18nData.value.isUntranslated ? \"untranslated\" : \"outdated\",\n);\nconst containerType = computed(() =>\n  tipType.value === \"untranslated\" ? \"tip\" : \"warning\",\n);\nconst containerTitle = computed(() => locale.value[tipType.value].title);\nconst containerContent = computed(() =>\n  showTips.value\n    ? getContent(tipType.value, locale.value, i18nData.value)\n    : null,\n);\n</script>\n\n<template>\n  <div\n    v-if=\"showTips && containerContent\"\n    :class=\"[...containerClass, containerType]\"\n  >\n    <p :class=\"titleClass\">\n      {{ containerTitle }}\n    </p>\n    <!--eslint-disable-next-line vue/no-v-html -->\n    <p v-html=\"containerContent\"></p>\n  </div>\n</template>\n","import { usePageData } from \"@vuepress/client\";\nimport { computed, type ComputedRef } from \"vue\";\nimport type { I18nData, I18nPluginPageData } from \"../../shared/types.js\";\nimport {\n  baseLocalePath,\n  containerClass,\n  locales,\n  titleClass,\n  translationGuides,\n} from \"../define.js\";\n\n/**\n * Get the i18n metadata of current page\n */\nexport const useI18nData = (): ComputedRef<I18nData> =>\n  computed(() => {\n    const {\n      outdated: isOutdated = false,\n      pathLocale = baseLocalePath,\n      sourceLink,\n      sourceUpdatedTime,\n      untranslated: isUntranslated = false,\n      updatedTime,\n    } = usePageData<I18nPluginPageData>().value.i18n ?? {};\n\n    const locale =\n      locales[pathLocale ?? baseLocalePath] ?? locales[baseLocalePath]!;\n    const translationGuide =\n      translationGuides[pathLocale] ?? translationGuides[baseLocalePath];\n    return {\n      isOutdated,\n      isUntranslated,\n      locale,\n      options: {\n        baseLocalePath,\n        containerClass,\n        titleClass,\n      },\n      pathLocale,\n      sourceLink,\n      sourceUpdatedTime,\n      translationGuide,\n      updatedTime,\n    };\n  });\n","import {\n  translationGuides as _translationGuides,\n  locales as _locales,\n  //@ts-expect-error 2307\n} from \"@temp/i18n-locales\";\nimport type { I18nPluginLocaleData } from \"../shared/types.js\";\n\n// VuePress defines\ndeclare const I18N_PLUGIN_CONTAINER_CLASS: string[];\ndeclare const I18N_PLUGIN_BASE_LOCALE_PATH: string;\ndeclare const I18N_PLUGIN_TITLE_CLASS: string[];\nconst containerClass = I18N_PLUGIN_CONTAINER_CLASS;\nconst baseLocalePath = I18N_PLUGIN_BASE_LOCALE_PATH;\nconst titleClass = I18N_PLUGIN_TITLE_CLASS;\n\n// declare in file ${temp}/i18n-locales.js\ntype Locales = Record<string, I18nPluginLocaleData>;\n\nconst translationGuides = _translationGuides as Record<\n  string,\n  string | undefined\n>;\nconst locales = _locales as Locales;\n\nexport {\n  containerClass,\n  translationGuides,\n  locales,\n  baseLocalePath,\n  titleClass,\n};\n","import { toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"innerHTML\"]\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return ($setup.showTips && $setup.containerContent)\n    ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        class: _normalizeClass([...$setup.containerClass, $setup.containerType])\n      }, [\n        _createElementVNode(\"p\", {\n          class: _normalizeClass($setup.titleClass)\n        }, _toDisplayString($setup.containerTitle), 3 /* TEXT, CLASS */),\n        _createCommentVNode(\"eslint-disable-next-line vue/no-v-html \"),\n        _createElementVNode(\"p\", { innerHTML: $setup.containerContent }, null, 8 /* PROPS */, _hoisted_1)\n      ], 2 /* CLASS */))\n    : _createCommentVNode(\"v-if\", true)\n}","import script from \"/home/runner/work/vuepress-plugin-i18n/vuepress-plugin-i18n/src/client/components/I18nTip.vue?type=script\";import { render } from \"/home/runner/work/vuepress-plugin-i18n/vuepress-plugin-i18n/src/client/components/I18nTip.vue?type=template\"; script.render = render;script.__file = \"src/client/components/I18nTip.vue\";export default script;"],"mappings":"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","names":["computed","locale","i18nData","containerClass","titleClass","computed","I18nTip_default","I18nTip_default"]}